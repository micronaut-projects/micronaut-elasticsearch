plugins {
    id 'groovy'
}

repositories {
    mavenCentral()
}

dependencies {
    testImplementation(platform(libs.boms.micronaut))
    testCompileOnly mn.micronaut.inject.groovy
    testImplementation mn.micronaut.validation
    testImplementation mn.spock
    testImplementation mn.micronaut.test.spock

    // tag::testcontainers-dependencies[]
    testImplementation(libs.testcontainers.spock)
    testImplementation(libs.testcontainers.elasticsearch)
    // end::testcontainers-dependencies[]

    testImplementation projects.elasticsearch

    testRuntimeOnly mn.logback
}

tasks.named('test') {
    useJUnitPlatform()
    systemProperty 'elasticsearch.version', libs.versions.managed.elasticsearch.get()
}

java {
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
}
